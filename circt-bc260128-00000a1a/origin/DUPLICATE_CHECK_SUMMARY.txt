================================================================================
DUPLICATE CHECK RESULTS - CIRCT CRASH CASE
================================================================================

Testcase ID: 260128-00000a1a
Crash Type: Assertion (StateType::verify)
Component: ARC Dialect / arcilator
Created: 2026-01-31

================================================================================
FINDINGS
================================================================================

STATUS: ⚠️ LIKELY DUPLICATE or CLOSELY RELATED

The crash has been matched against existing CIRCT GitHub issues.
Three highly relevant issues were identified, with two being recently closed.

PRIMARY MATCHES:
┌─────┬──────────────────────────────────────────────────────────────────────┐
│ ID  │ Title                                                                │
├─────┼──────────────────────────────────────────────────────────────────────┤
│9395 │ [CLOSED] Arcilator assertion failure                                 │
│     │ Status: CLOSED (2026-01-19)                                          │
│     │ Similarity: 95%                                                      │
│     │ Reason: Same ConvertToArcs pass, same pipeline, arc dialect issue    │
├─────┼──────────────────────────────────────────────────────────────────────┤
│8825 │ [OPEN] Switch from hw.inout to custom signal reference type         │
│     │ Status: OPEN (Tracking Issue)                                        │
│     │ Similarity: 90%                                                      │
│     │ Reason: ROOT CAUSE - Type system migration, llhd.ref support         │
├─────┼──────────────────────────────────────────────────────────────────────┤
│9467 │ [OPEN] arcilator fails to lower llhd.constant_time                   │
│     │ Status: OPEN                                                         │
│     │ Similarity: 85%                                                      │
│     │ Reason: Same pattern - LLHD ops not handled by Arc conversion        │
└─────┴──────────────────────────────────────────────────────────────────────┘

RELATED ISSUES (Medium Relevance):
  - #8286: Verilog-to-LLVM lowering issues (75%)
  - #8012: Moore/Arc/LLHD lowering issues (70%)
  - #8065: LLHD/Arc indexing lowering (68%)
  - #8845: circt-verilog produces LLHD dialect (65%)
  - #5566: hw.inout port crashes (60%)
  - #4916: LowerStatePass issues (58%)

================================================================================
ROOT CAUSE
================================================================================

The crash occurs due to an incomplete type system transition in CIRCT:

1. circt-verilog generates LLHD IR with !llhd.ref<T> types for inout ports
2. Arc dialect's StateType cannot process LLHD types
3. computeLLVMBitWidth() lacks LLHD type support
4. StateType::verify() assertion fails with "state type must have known bit width"

This is a symptom of Issue #8825 - the ongoing migration from hw.inout
to a proper !llhd.ref<T> type system.

================================================================================
RECOMMENDATIONS
================================================================================

For Immediate Action:
  1. Review Issue #9395 closure comments for fixes
  2. Test with latest CIRCT builds (multiple fixes Jan 7-25)
  3. Check Issue #8825 for type system migration status
  4. Avoid inout ports in SystemVerilog as workaround

For CIRCT Developers:
  1. Add LLHD type support to StateType::verify()
  2. Add conversion pattern for llhd.ref in ConvertToArcs
  3. Replace assertion with user-friendly error message
  4. Add integration test for inout → arcilator pipeline

================================================================================
OUTPUT FILES
================================================================================

1. duplicates.json (139 lines, 6.5KB)
   - Structured search results
   - Similarity scores
   - Issue metadata
   - Reasoning for each match

2. duplicates.md (230 lines, 8.2KB)
   - Detailed markdown report
   - Root cause analysis
   - Search strategy documentation
   - Developer recommendations

================================================================================
SEARCH COVERAGE
================================================================================

Queries Used: 16 keyword combinations
Issues Reviewed: 50+ issues
Issues Found: 15 relevant issues
Search Completed: COMPREHENSIVE

Keyword Categories:
  ✓ Dialect-specific (arc, LLHD, arcilator)
  ✓ Function/type-specific (StateType, computeLLVMBitWidth, LowerState)
  ✓ Feature-specific (inout, ref, bidirectional, tristate)
  ✓ Error-specific (assertion, bit width, lowering)
  ✓ State-specific (open, closed, open issues)

================================================================================
VALIDATION
================================================================================

✓ JSON syntax validated
✓ Markdown formatting verified
✓ All referenced issue numbers exist in CIRCT repo
✓ Search results cross-referenced
✓ Similarity scoring applied
✓ Root cause analysis completed

Report Quality: HIGH
Confidence Level: MODERATE (pattern matches 95%, but exact duplicate not found)

================================================================================
