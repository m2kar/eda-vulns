╔════════════════════════════════════════════════════════════════════════════╗
║         CHECK-DUPLICATES-WORKER 完成报告 (260129-00001624)                ║
╚════════════════════════════════════════════════════════════════════════════╝

✅ 工作状态: 完成

════════════════════════════════════════════════════════════════════════════
最终建议摘要
════════════════════════════════════════════════════════════════════════════

⚠️  RECOMMENDATION:  likely_duplicate
✅ CONFIDENCE:      HIGH
🎯 TOP_ISSUE:       #8930
📊 TOP_SCORE:       7

════════════════════════════════════════════════════════════════════════════
关键信息
════════════════════════════════════════════════════════════════════════════

Testcase ID:       260129-00001624
Dialect:           moore
Pass:              MooreToCore
Crash Type:        assertion
Assertion Msg:     dyn_cast on a non-existent value
Keywords:          union packed, output port, typedef
Missing Types:     moore::UnionType, moore::UnpackedUnionType

════════════════════════════════════════════════════════════════════════════
搜索结果
════════════════════════════════════════════════════════════════════════════

仓库:               llvm/circt
搜索条件:
  • Moore 标签 Issue
  • 关键词匹配
  • Pass 名称匹配
  • Assertion 消息匹配

Total Issues Found: 13
  #7531, #7629, #7753, #8021, #8163, #8176, #8211, #8215, 
  #8269, #8476, #8930 (TOP), #8973, #9206

════════════════════════════════════════════════════════════════════════════
Top 1 相似 Issue
════════════════════════════════════════════════════════════════════════════

Issue #8930 (分数: 7)
  Title:      [MooreToCore] Crash with sqrt/floor
  Status:     OPEN
  Author:     uenoku
  Created:    2025-09-06
  Link:       https://github.com/llvm/circt/issues/8930
  
  Matches:
    ✓ dialect:moore (权重 2)
    ✓ pass:mooretocore (权重 2)
    ✓ assertion:dyn_cast (权重 3)

════════════════════════════════════════════════════════════════════════════
相似度分析
════════════════════════════════════════════════════════════════════════════

共同点:
  1. 都涉及 Moore 方言
  2. 都在 MooreToCore Pass 中失败
  3. 都触发 dyn_cast assertion
  4. 都是类型转换相关问题

差异:
  • 当前: 缺失 UnionType 转换
  • #8930: 缺失 Real 类型转换

根本原因:
  MooreToCore Pass 的 typeConverter.convertType() 返回 null Type，
  导致在 getModulePortInfo 处理模块端口时 dyn_cast 失败。

════════════════════════════════════════════════════════════════════════════
评分算法
════════════════════════════════════════════════════════════════════════════

algorithm: keyword(1) + dialect(2) + pass(2) + assertion(3) 
           + missing_type(3) + inout(3) + union(2)

权重分配:
  • 关键词匹配:    1 分/个
  • Dialect 匹配:   2 分
  • Pass 匹配:      2 分
  • Assertion 匹配: 3 分
  • 缺失类型匹配:   3 分/个
  • InOutType:     3 分
  • Union 特性:     2 分

════════════════════════════════════════════════════════════════════════════
建议行动
════════════════════════════════════════════════════════════════════════════

1. ⚠️  不要立即创建新 Issue
2. 🔍 访问 https://github.com/llvm/circt/issues/8930
3. 📝 评估两个 bug 的相似度和关联性
4. ✅ 判断是否应该:
   a) 合并到 Issue #8930
   b) 作为相同问题的另一个测试用例
   c) 保留为独立 Issue (如果根本原因不同)

════════════════════════════════════════════════════════════════════════════
输出文件列表
════════════════════════════════════════════════════════════════════════════

✅ duplicates.json       (12 KB)
   - 结构化数据
   - 所有 13 个 Issue 的评分
   - Top 10 排名

✅ duplicates.md         (3.9 KB)
   - 人可读的完整报告
   - 包含搜索方法说明
   - 完整的相似度分析

✅ duplicates_raw.json   (5.7 KB)
   - 原始 gh CLI 搜索结果
   - 用于验证和调试

════════════════════════════════════════════════════════════════════════════

生成时间: 2026-02-01 10:47:09 UTC
工作用时: < 1 分钟
执行状态: ✅ 成功

════════════════════════════════════════════════════════════════════════════
