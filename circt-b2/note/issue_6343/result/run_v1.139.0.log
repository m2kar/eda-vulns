PLEASE submit a bug report to https://github.com/llvm/circt and include the crash backtrace.
Stack dump:
0.	Program arguments: /edazz/circt-history-bugs/builds/firtool-1.139.0/bin/circt-opt --pass-pipeline=builtin.module(lower-scf-to-calyx{top-level-function=mlir_func_ZTSZZ4mainENKUlRN4sycl3_V17handlerEE_clES2_E7conv_2D},canonicalize) /edazz/circt-history-bugs/issue_6343/result/output/lowered2.mlir
 #0 0x00007f8dbf9208a8 llvm::sys::PrintStackTrace(llvm::raw_ostream&, int) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libLLVMSupport.so+0x2008a8)
 #1 0x00007f8dbf91e2f5 llvm::sys::RunSignalHandlers() (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libLLVMSupport.so+0x1fe2f5)
 #2 0x00007f8dbf921631 SignalHandler(int, siginfo_t*, void*) Signals.cpp:0:0
 #3 0x00007f8dbf430330 (/lib/x86_64-linux-gnu/libc.so.6+0x45330)
 #4 0x00007f8dbfb6b4f3 mlir::SuccessorRange::SuccessorRange(mlir::Block*) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIRIR.so+0x8f4f3)
 #5 0x00007f8dc58214f7 circt::scftocalyx::BuildControl::buildCFGControl(llvm::DenseSet<mlir::Block*, llvm::DenseMapInfo<mlir::Block*, void>>, mlir::PatternRewriter&, mlir::Block*, mlir::Block*, mlir::Block*) const (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libCIRCTSCFToCalyx.so+0x644f7)
 #6 0x00007f8dc5821256 circt::scftocalyx::BuildControl::partiallyLowerFuncToComp(mlir::func::FuncOp, mlir::PatternRewriter&) const (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libCIRCTSCFToCalyx.so+0x64256)
 #7 0x00007f8dc470398d circt::calyx::FuncOpPartialLoweringPattern::partiallyLower(mlir::func::FuncOp, mlir::PatternRewriter&) const (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libCIRCTCalyxTransforms.so+0x1c98d)
 #8 0x00007f8dc5816047 circt::calyx::PartialLoweringPattern<mlir::func::FuncOp, mlir::OpRewritePattern>::matchAndRewrite(mlir::func::FuncOp, mlir::PatternRewriter&) const (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libCIRCTSCFToCalyx.so+0x59047)
 #9 0x00007f8dc1e8a8ed void llvm::function_ref<void ()>::callback_fn<mlir::PatternApplicator::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&, llvm::function_ref<bool (mlir::Pattern const&)>, llvm::function_ref<void (mlir::Pattern const&)>, llvm::function_ref<llvm::LogicalResult (mlir::Pattern const&)>)::$_0>(long) PatternApplicator.cpp:0:0
#10 0x00007f8dc1e87774 mlir::PatternApplicator::matchAndRewrite(mlir::Operation*, mlir::PatternRewriter&, llvm::function_ref<bool (mlir::Pattern const&)>, llvm::function_ref<void (mlir::Pattern const&)>, llvm::function_ref<llvm::LogicalResult (mlir::Pattern const&)>) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIRRewrite.so+0x7774)
#11 0x00007f8dc1edf4a7 (anonymous namespace)::GreedyPatternRewriteDriver::processWorklist() GreedyPatternRewriteDriver.cpp:0:0
#12 0x00007f8dc1edcfd9 mlir::applyPatternsGreedily(mlir::Region&, mlir::FrozenRewritePatternSet const&, mlir::GreedyRewriteConfig, bool*) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIRTransformUtils.so+0x46fd9)
#13 0x00007f8dc5810341 circt::(anonymous namespace)::SCFToCalyxPass::runOnOperation() SCFToCalyx.cpp:0:0
#14 0x00007f8dc1c7c2a5 mlir::detail::OpToOpPassAdaptor::run(mlir::Pass*, mlir::Operation*, mlir::AnalysisManager, bool, unsigned int) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIRPass.so+0x172a5)
#15 0x00007f8dc1c7f7a9 mlir::PassManager::run(mlir::Operation*) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIRPass.so+0x1a7a9)
#16 0x00007f8dc55da06a performActions(llvm::raw_ostream&, std::shared_ptr<llvm::SourceMgr> const&, mlir::MLIRContext*, mlir::MlirOptMainConfig const&) MlirOptMain.cpp:0:0
#17 0x00007f8dc55d91be llvm::LogicalResult llvm::function_ref<llvm::LogicalResult (std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::MemoryBufferRef const&, llvm::raw_ostream&)>::callback_fn<mlir::MlirOptMain(llvm::raw_ostream&, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, mlir::DialectRegistry&, mlir::MlirOptMainConfig const&)::$_0>(long, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::MemoryBufferRef const&, llvm::raw_ostream&) MlirOptMain.cpp:0:0
#18 0x00007f8dbfaaf257 mlir::splitAndProcessBuffer(std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::function_ref<llvm::LogicalResult (std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, llvm::MemoryBufferRef const&, llvm::raw_ostream&)>, llvm::raw_ostream&, llvm::StringRef, llvm::StringRef) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIRSupport.so+0x27257)
#19 0x00007f8dc55cf4e8 mlir::MlirOptMain(llvm::raw_ostream&, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer>>, mlir::DialectRegistry&, mlir::MlirOptMainConfig const&) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIROptLib.so+0xa4e8)
#20 0x00007f8dc55cf7d6 mlir::MlirOptMain(int, char**, llvm::StringRef, llvm::StringRef, mlir::DialectRegistry&) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIROptLib.so+0xa7d6)
#21 0x00007f8dc55cfa0d mlir::MlirOptMain(int, char**, llvm::StringRef, mlir::DialectRegistry&) (/home/zhiqing/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/../lib/libMLIROptLib.so+0xaa0d)
#22 0x000055d8d9659e10 main (/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/circt-opt+0xde10)
#23 0x00007f8dbf4151ca __libc_start_call_main ./csu/../sysdeps/nptl/libc_start_call_main.h:74:3
#24 0x00007f8dbf41528b call_init ./csu/../csu/libc-start.c:128:20
#25 0x00007f8dbf41528b __libc_start_main ./csu/../csu/libc-start.c:347:5
#26 0x000055d8d96596a5 _start (/edazz/circt-history-bugs/builds/firtool-1.139.0/bin/circt-opt+0xd6a5)
