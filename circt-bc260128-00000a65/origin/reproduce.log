=== CIRCT Bug Reproduction ===

Original Command:
/edazz/FeatureFuzz-SV/target/circt-1.139.0/bin/circt-verilog --ir-hw source.sv | /edazz/FeatureFuzz-SV/target/circt-1.139.0/bin/arcilator | /edazz/FeatureFuzz-SV/target/circt-1.139.0/bin/opt -O0 | /edazz/FeatureFuzz-SV/target/circt-1.139.0/bin/llc -O0 --filetype=obj

Reproduction Command (Current Toolchain):
/opt/firtool/bin/circt-verilog --ir-hw source.sv | /opt/firtool/bin/arcilator | opt -O0 | llc -O0 --filetype=obj

Tool Versions:
- circt-verilog: CIRCT firtool-1.139.0 (LLVM 22.0.0git)
- arcilator: CIRCT firtool-1.139.0 (LLVM 22.0.0git)

Crash Signature (Original):
Assertion `succeeded(ConcreteT::verifyInvariants(getDefaultDiagnosticEmitFn(ctx), args...))' failed.
Error: "state type must have a known bit width; got '!llhd.ref<i1>'"

Reproduction Result:
EXIT CODE: 0

Status: BUG NOT REPRODUCED
The current toolchain (firtool-1.139.0) successfully processed the test case without crashing.
This suggests the bug may have been fixed between versions or the toolchain behavior has changed.

Output:
; ModuleID = 'LLVMDialectModule'
source_filename = "LLVMDialectModule"

declare void @exit(i32)

define void @MixedPorts_eval(ptr %0) {
  %2 = load i1, ptr %0, align 1
  %3 = getelementptr i8, ptr %0, i32 4
  %4 = load i1, ptr %3, align 1
  store i1 %2, ptr %3, align 1
  %5 = xor i1 %4, %2
  %6 = and i1 %5, %2
  br i1 %6, label %7, label %14

7:                                                ; preds = %1
  %8 = getelementptr i8, ptr %0, i32 3
  %9 = load i4, ptr %8, align 1
  %10 = getelementptr i8, ptr %0, i32 1
  %11 = load i1, ptr %10, align 1
  %12 = add i4 %9, 1
  %13 = select i1 %11, i4 %12, i4 %9
  store i4 %13, ptr %8, align 1
  br label %14

14:                                               ; preds = %7, %1
  %15 = getelementptr i8, ptr %0, i32 3
  %16 = load i4, ptr %15, align 1
  %17 = icmp eq i4 %16, -1
  %18 = getelementptr i8, ptr %0, i32 5
  store i1 %17, ptr %18, align 1
  ret void
}

!llvm.module.flags = !{!0}

!0 = !{i32 2, !"Debug Info Version", i32 3}
