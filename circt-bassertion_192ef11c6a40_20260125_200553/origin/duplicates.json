{
  "version": "1.0",
  "search_timestamp": "2026-01-28T00:00:00Z",
  "search_criteria": {
    "keywords": ["StateType", "arcilator", "inout", "llhd.ref", "bidirectional", "tristate", "LowerState", "bit width", "computeLLVMBitWidth", "Arc"],
    "dialect": "Arc",
    "crash_type": "assertion",
    "failing_pass": "LowerStatePass",
    "assertion_message": "state type must have a known bit width; got '!llhd.ref<i1>'"
  },
  "search_queries": [
    {
      "query": "StateType arcilator",
      "results_count": 0
    },
    {
      "query": "inout llhd.ref",
      "results_count": 1
    },
    {
      "query": "bit width state type",
      "results_count": 6
    },
    {
      "query": "LowerState Arc assertion",
      "results_count": 0
    },
    {
      "query": "arcilator inout tristate",
      "results_count": 0
    },
    {
      "query": "circt-verilog llhd",
      "results_count": 50
    },
    {
      "query": "Arc label filter",
      "results_count": 30
    }
  ],
  "candidate_issues": [
    {
      "number": 8825,
      "title": "[LLHD] Switch from hw.inout to a custom signal reference type",
      "state": "OPEN",
      "url": "https://github.com/llvm/circt/issues/8825",
      "labels": ["LLHD"],
      "similarity_analysis": {
        "title_match_score": 2.0,
        "body_keyword_score": 3.0,
        "assertion_match_score": 0.0,
        "dialect_match_score": 0.0,
        "total_score": 5.0
      },
      "relevance": "HIGH - Directly discusses the transition to !llhd.ref<T> type for signal references which is exactly what's failing in StateType. This is a design/feature issue about introducing llhd.ref type, not about Arc's inability to handle it.",
      "is_duplicate": false,
      "reason": "This is a feature request/design discussion about introducing llhd.ref type. Our bug is about Arc dialect's StateType not supporting this type. Different issue scopes."
    },
    {
      "number": 8845,
      "title": "[circt-verilog] `circt-verilog` produces non `comb`/`seq` dialects including `cf` and `llhd`",
      "state": "OPEN",
      "url": "https://github.com/llvm/circt/issues/8845",
      "labels": ["LLHD", "Verilog/SystemVerilog", "ImportVerilog"],
      "similarity_analysis": {
        "title_match_score": 1.0,
        "body_keyword_score": 2.0,
        "assertion_match_score": 0.0,
        "dialect_match_score": 1.5,
        "total_score": 4.5
      },
      "relevance": "MEDIUM - Related symptom (LLHD types appearing when not expected) but different root cause. Issue is about circt-verilog output dialects, not arcilator's handling.",
      "is_duplicate": false,
      "reason": "Different issue - about circt-verilog producing unexpected dialects. Our bug is about arcilator/Arc unable to handle llhd.ref types in StateType."
    },
    {
      "number": 9467,
      "title": "[circt-verilog][arcilator] `arcilator` fails to lower `llhd.constant_time` generated from simple SV delay (`#1`)",
      "state": "OPEN",
      "url": "https://github.com/llvm/circt/issues/9467",
      "labels": ["LLHD", "Arc"],
      "similarity_analysis": {
        "title_match_score": 2.0,
        "body_keyword_score": 3.0,
        "assertion_match_score": 0.0,
        "dialect_match_score": 3.0,
        "total_score": 8.0
      },
      "relevance": "HIGH - Similar pattern: arcilator cannot handle certain LLHD types/ops. But different failing op (llhd.constant_time vs llhd.ref in StateType).",
      "is_duplicate": false,
      "reason": "Similar class of bug (arcilator + LLHD incompatibility) but different failing operation. #9467 is about llhd.constant_time, our bug is about llhd.ref<i1> in StateType."
    },
    {
      "number": 9469,
      "title": "[circt-verilog][arcilator] Inconsistent compilation behavior: direct array indexing in always_ff sensitivity list vs. intermediate wire",
      "state": "CLOSED",
      "url": "https://github.com/llvm/circt/issues/9469",
      "labels": ["LLHD", "Arc"],
      "similarity_analysis": {
        "title_match_score": 1.0,
        "body_keyword_score": 2.0,
        "assertion_match_score": 0.0,
        "dialect_match_score": 3.0,
        "total_score": 6.0
      },
      "relevance": "MEDIUM - Related arcilator + LLHD incompatibility but different trigger (array indexing vs inout ports).",
      "is_duplicate": false,
      "reason": "Different trigger - array indexing in sensitivity lists. Our bug is triggered by inout ports creating llhd.ref types."
    },
    {
      "number": 9395,
      "title": "[circt-verilog][arcilator] Arcilator assertion failure",
      "state": "CLOSED",
      "url": "https://github.com/llvm/circt/issues/9395",
      "labels": ["Arc", "ImportVerilog"],
      "similarity_analysis": {
        "title_match_score": 2.0,
        "body_keyword_score": 1.0,
        "assertion_match_score": 0.0,
        "dialect_match_score": 1.5,
        "total_score": 4.5
      },
      "relevance": "LOW - Different assertion failure (in MLIR DialectConversion, not StateType).",
      "is_duplicate": false,
      "reason": "Different assertion - failure in MLIR's replaceUsesWithIf during ConvertToArcs. Our bug is StateType verification failure."
    }
  ],
  "top_5_similar": [
    {
      "rank": 1,
      "number": 9467,
      "title": "[circt-verilog][arcilator] `arcilator` fails to lower `llhd.constant_time`",
      "score": 8.0
    },
    {
      "rank": 2,
      "number": 9469,
      "title": "[circt-verilog][arcilator] Inconsistent compilation behavior: direct array indexing",
      "score": 6.0
    },
    {
      "rank": 3,
      "number": 8825,
      "title": "[LLHD] Switch from hw.inout to a custom signal reference type",
      "score": 5.0
    },
    {
      "rank": 4,
      "number": 8845,
      "title": "[circt-verilog] produces non comb/seq dialects including cf and llhd",
      "score": 4.5
    },
    {
      "rank": 5,
      "number": 9395,
      "title": "[circt-verilog][arcilator] Arcilator assertion failure",
      "score": 4.5
    }
  ],
  "recommendation": {
    "decision": "likely_new",
    "top_score": 8.0,
    "top_issue": 9467,
    "rationale": "While several related issues exist (particularly #9467 about arcilator + LLHD incompatibility), none specifically address the StateType assertion failure with llhd.ref types. The closest issue (#9467) is about llhd.constant_time, not llhd.ref. Our bug represents a distinct failure mode: Arc's StateType cannot handle llhd.ref<T> types from inout ports. This is a new bug that should be reported, but the issue should reference #9467 and #8825 as related work."
  }
}
