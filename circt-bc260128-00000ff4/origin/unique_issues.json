[
  {
    "body": "In the following, somewhat artificial, example, the `arc.state` with `clock %clk1` is pulled into the clock tree of `%clk0`. As a result, it is also not lowered to a latency 0 arc with associated read and write operations. Even if that happened, it would be triggered by the wrong clock. In practice, this cannot occur right now, but it would still be great if the pass complains about such inputs.\r\n\r\n```mlir\r\nhw.module @MaterializeOpsWithRegions(%clk0: i1, %clk1: i1) -> (z: i42) {\r\n  %true = hw.constant true\r\n  %0 = scf.if %true -> (i42) {\r\n    %c19_i42 = hw.constant 19 : i42\r\n    %1 = arc.state @DummyArc(%c19_i42) clock %clk1 lat 1 : (i42) -> i42\r\n    scf.yield %1 : i42\r\n  } else {\r\n    %c42_i42 = hw.constant 42 : i42\r\n    scf.yield %c42_i42 : i42\r\n  }\r\n  %1 = arc.state @DummyArc(%0) clock %clk0 lat 1 : (i42) -> i42\r\n  hw.output %1 : i42\r\n}\r\n```",
    "createdAt": "2023-04-01T09:09:05Z",
    "labels": [
      {
        "id": "LA_kwDODpuCgs8AAAABNapjiA",
        "name": "Arc",
        "description": "Involving the `arc` dialect",
        "color": "bfd4f2"
      }
    ],
    "number": 4916,
    "state": "OPEN",
    "title": "[Arc] LowerState: nested arc.state get pulled in wrong clock tree",
    "url": "https://github.com/llvm/circt/issues/4916"
  },
  {
    "body": "A while ago, we have switched the LLHD dialect from a custom `!llhd.sig` wrapper type to `!hw.inout` in order to represent a reference to a signal slot that can be probed and driven. To support Verilog's `time` values, we have to be able to store an `!llhd.time` value in a variable and read and write that variable. Variables are effectively signals, and Verilog variables get mapped to `llhd.sig` allocation operations. These return a reference type. This prevents us from creating `time` variables today, since `!hw.inout` forces `isHWValueType` on the inner type, which `llhd::TimeType` is not.\n\nIdeally, we'd create something like an `!llhd.ref<T>` type to represent a reference to a signal. In the future, we might want to add additional types for multi-driver nets.",
    "createdAt": "2025-08-06T04:38:33Z",
    "labels": [
      {
        "id": "MDU6TGFiZWwyMTY1NDc5NTk1",
        "name": "LLHD",
        "description": "",
        "color": "e07b00"
      }
    ],
    "number": 8825,
    "state": "OPEN",
    "title": "[LLHD] Switch from hw.inout to a custom signal reference type",
    "url": "https://github.com/llvm/circt/issues/8825"
  }
]
