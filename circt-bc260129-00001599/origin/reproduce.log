=== CIRCT Bug Reproduction Report ===
Testcase ID: 260129-00001599

=== Original Command (from error.txt) ===
circt-verilog --ir-hw /tmp/featurefuzz_sv_08g_yrpv/test_eddc287a6b45.sv | arcilator | opt -O0 | llc -O0 --filetype=obj -o /tmp/featurefuzz_sv_08g_yrpv/test_eddc287a6b45.o

=== Original Toolchain ===
CIRCT: circt-1.139.0
LLVM: LLVM 22.0.0git (embedded in circt-1.139.0)

=== Current Toolchain ===
circt-verilog version: CIRCT firtool-1.139.0
LLVM version: LLVM 22.0.0git
Location: /opt/firtool/bin

=== Expected Error Signature ===
<unknown>:0: error: state type must have a known bit width; got '!llhd.ref<i1>'
Assertion: Assertion `succeeded( ConcreteT::verifyInvariants(getDefaultDiagnosticEmitFn(ctx), args...))' failed

=== Reproduction Attempt ===

Command executed:
  circt-verilog --ir-hw source.sv | arcilator | opt -O0

Result:
  SUCCESS - Command completed without crashing
  Exit code: 0

=== Detailed Output ===

circt-verilog output (hwir):
module {
  hw.module @MixedPorts(in %a : i1, out b : i1, in %c : !llhd.ref<i1>) {
    hw.output %a : i1
  }
}

arcilator output (after arcilator processing):
; ModuleID = 'LLVMDialectModule'
source_filename = "LLVMDialectModule"

declare void @exit(i32)

define void @MixedPorts_eval(ptr %0) {
  %2 = load i1, ptr %0, align 1
  %3 = getelementptr i8, ptr %0, i32 2
  store i1 %2, ptr %3, align 1
  ret void
}

!llvm.module.flags = !{!0}

!0 = !{i32 2, !"Debug Info Version", i32 3}

=== Conclusion ===
The bug appears to have been FIXED in the current toolchain version.

Original Issue:
  - Input module contains inout port with !llhd.ref<i1> type
  - arcilator's LowerState pass tried to create a StateType with !llhd.ref<i1>
  - StateType verification failed because !llhd.ref<i1> doesn't have a known bit width
  - This triggered the assertion in StorageUniquerSupport.h:180

Current Behavior:
  - The pipeline successfully handles the inout port
  - No assertion failure or crash occurs
  - arcilator produces valid LLVM IR without errors

Fix Analysis:
  The fix appears to be in how StateType verification handles reference types,
  or in how the LowerState pass processes inout ports with reference types.
